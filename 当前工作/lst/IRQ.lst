


ARM Macro Assembler    Page 1 


    1 00000000         ;/****************************************Copyright (c)*
                       *************************************************
    2 00000000         ;**                               ¹ãÖÝÖÜÁ¢¹¦µ¥Æ¬»ú·¢Õ¹ÓÐ
                       ÏÞ¹«Ë¾
    3 00000000         ;**                                     ÑÐ    ¾¿    Ëù
    4 00000000         ;**                                        ²úÆ·Ò»²¿ 
    5 00000000         ;**
    6 00000000         ;**                                 http://www.zlgmcu.co
                       m
    7 00000000         ;**
    8 00000000         ;**--------------ÎÄ¼þÐÅÏ¢-------------------------------
                       -------------------------------------------------
    9 00000000         ;**ÎÄ   ¼þ   Ãû: IRQ.s
   10 00000000         ;**´´   ½¨   ÈË: ³ÂÃ÷¼Æ
   11 00000000         ;**×îºóÐÞ¸ÄÈÕÆÚ: 2004Äê5ÔÂ20ÈÕ
   12 00000000         ;**Ãè        Êö: ÔÊÐíÖÐ¶ÏÇ¶Ì×Ê±µÄIRQ¾ä±ú
   13 00000000         ;**              Ã¿¸ö¹¤³ÌÓ¦µ±ÓÐ¶ÀÁ¢µÄÕâ¸öÎÄ¼þµÄ¿½±´£¬²¢½
                       øÐÐÏàÓ¦µÄÐÞ¸Ä   
   14 00000000         ;**--------------ÀúÊ·°æ±¾ÐÅÏ¢---------------------------
                       -------------------------------------------------
   15 00000000         ;** ´´½¨ÈË: ³ÂÃ÷¼Æ
   16 00000000         ;** °æ  ±¾: v1.0
   17 00000000         ;** ÈÕ¡¡ÆÚ: 2004Äê2ÔÂ2ÈÕ
   18 00000000         ;** Ãè¡¡Êö: Ô­Ê¼°æ±¾
   19 00000000         ;**
   20 00000000         ;**-----------------------------------------------------
                       -------------------------------------------------
   21 00000000         ;** ÐÞ¸ÄÈË: ³ÂÃ÷¼Æ
   22 00000000         ;** °æ  ±¾: v1.1
   23 00000000         ;** ÈÕ¡¡ÆÚ: 2004Äê5ÔÂ26ÈÕ
   24 00000000         ;** Ãè¡¡Êö: ¸Ä½øHANDLERºê£¬Ê¹Æä¸ü¿É¿¿
   25 00000000         ;**
   26 00000000         ;**--------------µ±Ç°°æ±¾ÐÞ¶©---------------------------
                       ---------------------------------------------------
   27 00000000         ;** ÐÞ¸ÄÈË:
   28 00000000         ;** ÈÕ¡¡ÆÚ:
   29 00000000         ;** Ãè¡¡Êö:
   30 00000000         ;**
   31 00000000         ;**-----------------------------------------------------
                       -------------------------------------------------
   32 00000000         ;*******************************************************
                       *************************************************/
   33 00000000         
   34 00000000 00000080 
                       NoInt   EQU              0x80
   35 00000000         
   36 00000000 00000010 
                       USR32Mode
                               EQU              0x10
   37 00000000 00000013 
                       SVC32Mode
                               EQU              0x13
   38 00000000 0000001F 
                       SYS32Mode
                               EQU              0x1f
   39 00000000 00000012 
                       IRQ32Mode
                               EQU              0x12
   40 00000000 00000011 



ARM Macro Assembler    Page 2 


                       FIQ32Mode
                               EQU              0x11
   41 00000000         
   42 00000000         
   43 00000000         ;ÒýÈëµÄÍâ²¿±êºÅÔÚÕâÉùÃ÷
   44 00000000                 IMPORT           OSIntCtxSw  ;ÈÎÎñÇÐ»»º¯Êý
   45 00000000                 IMPORT           OSIntExit   ;ÖÐ¶ÏÍË³öº¯Êý
   46 00000000                 IMPORT           OSTCBCur
   47 00000000                 IMPORT           OSTCBHighRdy
   48 00000000                 IMPORT           OSIntNesting ;ÖÐ¶ÏÇ¶Ì×¼ÆÊýÆ÷
   49 00000000                 IMPORT           StackUsr
   50 00000000                 IMPORT           OsEnterSum
   51 00000000         
   52 00000000                 CODE32
   53 00000000         
   54 00000000                 PRESERVE8
   55 00000000                 AREA             IRQ,CODE,READONLY
   56 00000000         
   57 00000000                 MACRO
   58 00000000         $IRQ_Label
                               HANDLER          $IRQ_Exception_Function
   59 00000000         
   60 00000000                 EXPORT           $IRQ_Label  ; Êä³öµÄ±êºÅ
   61 00000000                 IMPORT           $IRQ_Exception_Function 
                                                            ; ÒýÓÃµÄÍâ²¿±êºÅ
   62 00000000         
   63 00000000         $IRQ_Label
   64 00000000                 SUB              LR, LR, #4  ; ¼ÆËã·µ»ØµØÖ·
   65 00000000                 STMFD            SP!, {R0-R3, R12, LR} 
                                                            ; ±£´æÈÎÎñ»·¾³
   66 00000000                 MRS              R3, SPSR    ; ±£´æ×´Ì¬
   67 00000000                 STMFD            SP, {R3, SP, LR}^ ; ±£´æÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   68 00000000         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   69 00000000                 LDR              R2,  =OSIntNesting 
                                                            ; OSIntNesting++
   70 00000000                 LDRB             R1, [R2]
   71 00000000                 ADD              R1, R1, #1
   72 00000000                 STRB             R1, [R2]
   73 00000000         
   74 00000000                 SUB              SP, SP, #4*3
   75 00000000         
   76 00000000                 MSR              CPSR_c, #(NoInt | SYS32Mode) 
                                                            ; ÇÐ»»µ½ÏµÍ³Ä£Ê½
   77 00000000                 CMP              R1, #1
   78 00000000                 LDREQ            SP, =StackUsr
   79 00000000         
   80 00000000                 BL               $IRQ_Exception_Function ; µ÷ÓÃc
                                                            ÓïÑÔµÄÖÐ¶Ï´¦Àí³ÌÐò
   81 00000000         
   82 00000000         ;       MSR     CPSR_c, #(NoInt | SYS32Mode)    ; ÇÐ»»µ½
                       ÏµÍ³Ä£Ê½
   83 00000000                 LDR              R2, =OsEnterSum ; OsEnterSum,Ê¹
                                                            OSIntExitÍË³öÊ±ÖÐ¶Ï
                                                            ¹Ø±Õ
   84 00000000                 MOV              R1, #1
   85 00000000                 STR              R1, [R2]
   86 00000000         



ARM Macro Assembler    Page 3 


   87 00000000                 BL               OSIntExit
   88 00000000         
   89 00000000                 LDR              R2, =OsEnterSum ; ÒòÎªÖÐ¶Ï·þÎñ³
                                                            ÌÐòÒªÍË³ö£¬ËùÒÔOsEn
                                                            terSum=0
   90 00000000                 MOV              R1, #0
   91 00000000                 STR              R1, [R2]
   92 00000000         
   93 00000000                 MSR              CPSR_c, #(NoInt | IRQ32Mode) 
                                                            ; ÇÐ»»»ØirqÄ£Ê½
   94 00000000                 LDMFD            SP, {R3, SP, LR}^ ; »Ö¸´ÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   95 00000000         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   96 00000000                 LDR              R0, =OSTCBHighRdy
   97 00000000                 LDR              R0, [R0]
   98 00000000                 LDR              R1, =OSTCBCur
   99 00000000                 LDR              R1, [R1]
  100 00000000                 CMP              R0, R1
  101 00000000         
  102 00000000                 ADD              SP, SP, #4*3 ; 
  103 00000000                 MSR              SPSR_cxsf, R3
  104 00000000                 LDMEQFD          SP!, {R0-R3, R12, PC}^ 
                                                            ; ²»½øÐÐÈÎÎñÇÐ»»
  105 00000000                 LDR              PC, =OSIntCtxSw ; ½øÐÐÈÎÎñÇÐ»»
  106 00000000                 MEND
  107 00000000         
  108 00000000         ;/* ÒÔÏÂÌí¼ÓÖÐ¶Ï¾ä±ú£¬ÓÃ»§¸ù¾ÝÊµ¼ÊÇé¿ö¸Ä±ä */
  109 00000000         
  110 00000000         ;/*ÖÐ¶Ï*/
  111 00000000         IRQ_Handler
                               HANDLER          IRQ_Exception
   59 00000000         
   60 00000000                 EXPORT           IRQ_Handler ; Êä³öµÄ±êºÅ
   61 00000000                 IMPORT           IRQ_Exception ; ÒýÓÃµÄÍâ²¿±êºÅ
   62 00000000         
   63 00000000         IRQ_Handler
   64 00000000 E24EE004        SUB              LR, LR, #4  ; ¼ÆËã·µ»ØµØÖ·
   65 00000004 E92D500F        STMFD            SP!, {R0-R3, R12, LR} 
                                                            ; ±£´æÈÎÎñ»·¾³
   66 00000008 E14F3000        MRS              R3, SPSR    ; ±£´æ×´Ì¬
   67 0000000C E94D6008        STMFD            SP, {R3, SP, LR}^ ; ±£´æÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   68 00000010         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   69 00000010 E59F24C0        LDR              R2,  =OSIntNesting 
                                                            ; OSIntNesting++
   70 00000014 E5D21000        LDRB             R1, [R2]
   71 00000018 E2811001        ADD              R1, R1, #1
   72 0000001C E5C21000        STRB             R1, [R2]
   73 00000020         
   74 00000020 E24DD00C        SUB              SP, SP, #4*3
   75 00000024         
   76 00000024 E321F09F        MSR              CPSR_c, #(NoInt | SYS32Mode) 
                                                            ; ÇÐ»»µ½ÏµÍ³Ä£Ê½
   77 00000028 E3510001        CMP              R1, #1
   78 0000002C 059FD4A8        LDREQ            SP, =StackUsr
   79 00000030         
   80 00000030 EBFFFFFE        BL               IRQ_Exception ; µ÷ÓÃcÓïÑÔµÄÖÐ¶Ï



ARM Macro Assembler    Page 4 


                                                            ´¦Àí³ÌÐò
   81 00000034         
   82 00000034         ;       MSR     CPSR_c, #(NoInt | SYS32Mode)    ; ÇÐ»»µ½
                       ÏµÍ³Ä£Ê½
   83 00000034 E59F24A4        LDR              R2, =OsEnterSum ; OsEnterSum,Ê¹
                                                            OSIntExitÍË³öÊ±ÖÐ¶Ï
                                                            ¹Ø±Õ
   84 00000038 E3A01001        MOV              R1, #1
   85 0000003C E5821000        STR              R1, [R2]
   86 00000040         
   87 00000040 EBFFFFFE        BL               OSIntExit
   88 00000044         
   89 00000044 E59F2494        LDR              R2, =OsEnterSum ; ÒòÎªÖÐ¶Ï·þÎñ³
                                                            ÌÐòÒªÍË³ö£¬ËùÒÔOsEn
                                                            terSum=0
   90 00000048 E3A01000        MOV              R1, #0
   91 0000004C E5821000        STR              R1, [R2]
   92 00000050         
   93 00000050 E321F092        MSR              CPSR_c, #(NoInt | IRQ32Mode) 
                                                            ; ÇÐ»»»ØirqÄ£Ê½
   94 00000054 E8DD6008        LDMFD            SP, {R3, SP, LR}^ ; »Ö¸´ÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   95 00000058         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   96 00000058 E59F0484        LDR              R0, =OSTCBHighRdy
   97 0000005C E5900000        LDR              R0, [R0]
   98 00000060 E59F1480        LDR              R1, =OSTCBCur
   99 00000064 E5911000        LDR              R1, [R1]
  100 00000068 E1500001        CMP              R0, R1
  101 0000006C         
  102 0000006C E28DD00C        ADD              SP, SP, #4*3 ; 
  103 00000070 E16FF003        MSR              SPSR_cxsf, R3
  104 00000074 08FD900F        LDMEQFD          SP!, {R0-R3, R12, PC}^ 
                                                            ; ²»½øÐÐÈÎÎñÇÐ»»
  105 00000078 E59FF46C        LDR              PC, =OSIntCtxSw ; ½øÐÐÈÎÎñÇÐ»»
  112 0000007C         
  113 0000007C         
  114 0000007C         ;/*¶¨Ê±Æ÷0ÖÐ¶Ï*/
  115 0000007C         Timer0_Handler
                               HANDLER          Timer0_Exception
   59 0000007C         
   60 0000007C                 EXPORT           Timer0_Handler ; Êä³öµÄ±êºÅ
   61 0000007C                 IMPORT           Timer0_Exception 
                                                            ; ÒýÓÃµÄÍâ²¿±êºÅ
   62 0000007C         
   63 0000007C         Timer0_Handler
   64 0000007C E24EE004        SUB              LR, LR, #4  ; ¼ÆËã·µ»ØµØÖ·
   65 00000080 E92D500F        STMFD            SP!, {R0-R3, R12, LR} 
                                                            ; ±£´æÈÎÎñ»·¾³
   66 00000084 E14F3000        MRS              R3, SPSR    ; ±£´æ×´Ì¬
   67 00000088 E94D6008        STMFD            SP, {R3, SP, LR}^ ; ±£´æÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   68 0000008C         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   69 0000008C E59F2444        LDR              R2,  =OSIntNesting 
                                                            ; OSIntNesting++
   70 00000090 E5D21000        LDRB             R1, [R2]
   71 00000094 E2811001        ADD              R1, R1, #1
   72 00000098 E5C21000        STRB             R1, [R2]



ARM Macro Assembler    Page 5 


   73 0000009C         
   74 0000009C E24DD00C        SUB              SP, SP, #4*3
   75 000000A0         
   76 000000A0 E321F09F        MSR              CPSR_c, #(NoInt | SYS32Mode) 
                                                            ; ÇÐ»»µ½ÏµÍ³Ä£Ê½
   77 000000A4 E3510001        CMP              R1, #1
   78 000000A8 059FD42C        LDREQ            SP, =StackUsr
   79 000000AC         
   80 000000AC EBFFFFFE        BL               Timer0_Exception ; µ÷ÓÃcÓïÑÔµÄÖ
                                                            Ð¶Ï´¦Àí³ÌÐò
   81 000000B0         
   82 000000B0         ;       MSR     CPSR_c, #(NoInt | SYS32Mode)    ; ÇÐ»»µ½
                       ÏµÍ³Ä£Ê½
   83 000000B0 E59F2428        LDR              R2, =OsEnterSum ; OsEnterSum,Ê¹
                                                            OSIntExitÍË³öÊ±ÖÐ¶Ï
                                                            ¹Ø±Õ
   84 000000B4 E3A01001        MOV              R1, #1
   85 000000B8 E5821000        STR              R1, [R2]
   86 000000BC         
   87 000000BC EBFFFFFE        BL               OSIntExit
   88 000000C0         
   89 000000C0 E59F2418        LDR              R2, =OsEnterSum ; ÒòÎªÖÐ¶Ï·þÎñ³
                                                            ÌÐòÒªÍË³ö£¬ËùÒÔOsEn
                                                            terSum=0
   90 000000C4 E3A01000        MOV              R1, #0
   91 000000C8 E5821000        STR              R1, [R2]
   92 000000CC         
   93 000000CC E321F092        MSR              CPSR_c, #(NoInt | IRQ32Mode) 
                                                            ; ÇÐ»»»ØirqÄ£Ê½
   94 000000D0 E8DD6008        LDMFD            SP, {R3, SP, LR}^ ; »Ö¸´ÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   95 000000D4         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   96 000000D4 E59F0408        LDR              R0, =OSTCBHighRdy
   97 000000D8 E5900000        LDR              R0, [R0]
   98 000000DC E59F1404        LDR              R1, =OSTCBCur
   99 000000E0 E5911000        LDR              R1, [R1]
  100 000000E4 E1500001        CMP              R0, R1
  101 000000E8         
  102 000000E8 E28DD00C        ADD              SP, SP, #4*3 ; 
  103 000000EC E16FF003        MSR              SPSR_cxsf, R3
  104 000000F0 08FD900F        LDMEQFD          SP!, {R0-R3, R12, PC}^ 
                                                            ; ²»½øÐÐÈÎÎñÇÐ»»
  105 000000F4 E59FF3F0        LDR              PC, =OSIntCtxSw ; ½øÐÐÈÎÎñÇÐ»»
  116 000000F8         Uart0_Handler
                               HANDLER          UART0_Exception
   59 000000F8         
   60 000000F8                 EXPORT           Uart0_Handler ; Êä³öµÄ±êºÅ
   61 000000F8                 IMPORT           UART0_Exception 
                                                            ; ÒýÓÃµÄÍâ²¿±êºÅ
   62 000000F8         
   63 000000F8         Uart0_Handler
   64 000000F8 E24EE004        SUB              LR, LR, #4  ; ¼ÆËã·µ»ØµØÖ·
   65 000000FC E92D500F        STMFD            SP!, {R0-R3, R12, LR} 
                                                            ; ±£´æÈÎÎñ»·¾³
   66 00000100 E14F3000        MRS              R3, SPSR    ; ±£´æ×´Ì¬
   67 00000104 E94D6008        STMFD            SP, {R3, SP, LR}^ ; ±£´æÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´



ARM Macro Assembler    Page 6 


   68 00000108         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   69 00000108 E59F23C8        LDR              R2,  =OSIntNesting 
                                                            ; OSIntNesting++
   70 0000010C E5D21000        LDRB             R1, [R2]
   71 00000110 E2811001        ADD              R1, R1, #1
   72 00000114 E5C21000        STRB             R1, [R2]
   73 00000118         
   74 00000118 E24DD00C        SUB              SP, SP, #4*3
   75 0000011C         
   76 0000011C E321F09F        MSR              CPSR_c, #(NoInt | SYS32Mode) 
                                                            ; ÇÐ»»µ½ÏµÍ³Ä£Ê½
   77 00000120 E3510001        CMP              R1, #1
   78 00000124 059FD3B0        LDREQ            SP, =StackUsr
   79 00000128         
   80 00000128 EBFFFFFE        BL               UART0_Exception ; µ÷ÓÃcÓïÑÔµÄÖÐ
                                                            ¶Ï´¦Àí³ÌÐò
   81 0000012C         
   82 0000012C         ;       MSR     CPSR_c, #(NoInt | SYS32Mode)    ; ÇÐ»»µ½
                       ÏµÍ³Ä£Ê½
   83 0000012C E59F23AC        LDR              R2, =OsEnterSum ; OsEnterSum,Ê¹
                                                            OSIntExitÍË³öÊ±ÖÐ¶Ï
                                                            ¹Ø±Õ
   84 00000130 E3A01001        MOV              R1, #1
   85 00000134 E5821000        STR              R1, [R2]
   86 00000138         
   87 00000138 EBFFFFFE        BL               OSIntExit
   88 0000013C         
   89 0000013C E59F239C        LDR              R2, =OsEnterSum ; ÒòÎªÖÐ¶Ï·þÎñ³
                                                            ÌÐòÒªÍË³ö£¬ËùÒÔOsEn
                                                            terSum=0
   90 00000140 E3A01000        MOV              R1, #0
   91 00000144 E5821000        STR              R1, [R2]
   92 00000148         
   93 00000148 E321F092        MSR              CPSR_c, #(NoInt | IRQ32Mode) 
                                                            ; ÇÐ»»»ØirqÄ£Ê½
   94 0000014C E8DD6008        LDMFD            SP, {R3, SP, LR}^ ; »Ö¸´ÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   95 00000150         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   96 00000150 E59F038C        LDR              R0, =OSTCBHighRdy
   97 00000154 E5900000        LDR              R0, [R0]
   98 00000158 E59F1388        LDR              R1, =OSTCBCur
   99 0000015C E5911000        LDR              R1, [R1]
  100 00000160 E1500001        CMP              R0, R1
  101 00000164         
  102 00000164 E28DD00C        ADD              SP, SP, #4*3 ; 
  103 00000168 E16FF003        MSR              SPSR_cxsf, R3
  104 0000016C 08FD900F        LDMEQFD          SP!, {R0-R3, R12, PC}^ 
                                                            ; ²»½øÐÐÈÎÎñÇÐ»»
  105 00000170 E59FF374        LDR              PC, =OSIntCtxSw ; ½øÐÐÈÎÎñÇÐ»»
  117 00000174         Uart1_Handler
                               HANDLER          UART1_Exception
   59 00000174         
   60 00000174                 EXPORT           Uart1_Handler ; Êä³öµÄ±êºÅ
   61 00000174                 IMPORT           UART1_Exception 
                                                            ; ÒýÓÃµÄÍâ²¿±êºÅ
   62 00000174         
   63 00000174         Uart1_Handler
   64 00000174 E24EE004        SUB              LR, LR, #4  ; ¼ÆËã·µ»ØµØÖ·



ARM Macro Assembler    Page 7 


   65 00000178 E92D500F        STMFD            SP!, {R0-R3, R12, LR} 
                                                            ; ±£´æÈÎÎñ»·¾³
   66 0000017C E14F3000        MRS              R3, SPSR    ; ±£´æ×´Ì¬
   67 00000180 E94D6008        STMFD            SP, {R3, SP, LR}^ ; ±£´æÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   68 00000184         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   69 00000184 E59F234C        LDR              R2,  =OSIntNesting 
                                                            ; OSIntNesting++
   70 00000188 E5D21000        LDRB             R1, [R2]
   71 0000018C E2811001        ADD              R1, R1, #1
   72 00000190 E5C21000        STRB             R1, [R2]
   73 00000194         
   74 00000194 E24DD00C        SUB              SP, SP, #4*3
   75 00000198         
   76 00000198 E321F09F        MSR              CPSR_c, #(NoInt | SYS32Mode) 
                                                            ; ÇÐ»»µ½ÏµÍ³Ä£Ê½
   77 0000019C E3510001        CMP              R1, #1
   78 000001A0 059FD334        LDREQ            SP, =StackUsr
   79 000001A4         
   80 000001A4 EBFFFFFE        BL               UART1_Exception ; µ÷ÓÃcÓïÑÔµÄÖÐ
                                                            ¶Ï´¦Àí³ÌÐò
   81 000001A8         
   82 000001A8         ;       MSR     CPSR_c, #(NoInt | SYS32Mode)    ; ÇÐ»»µ½
                       ÏµÍ³Ä£Ê½
   83 000001A8 E59F2330        LDR              R2, =OsEnterSum ; OsEnterSum,Ê¹
                                                            OSIntExitÍË³öÊ±ÖÐ¶Ï
                                                            ¹Ø±Õ
   84 000001AC E3A01001        MOV              R1, #1
   85 000001B0 E5821000        STR              R1, [R2]
   86 000001B4         
   87 000001B4 EBFFFFFE        BL               OSIntExit
   88 000001B8         
   89 000001B8 E59F2320        LDR              R2, =OsEnterSum ; ÒòÎªÖÐ¶Ï·þÎñ³
                                                            ÌÐòÒªÍË³ö£¬ËùÒÔOsEn
                                                            terSum=0
   90 000001BC E3A01000        MOV              R1, #0
   91 000001C0 E5821000        STR              R1, [R2]
   92 000001C4         
   93 000001C4 E321F092        MSR              CPSR_c, #(NoInt | IRQ32Mode) 
                                                            ; ÇÐ»»»ØirqÄ£Ê½
   94 000001C8 E8DD6008        LDMFD            SP, {R3, SP, LR}^ ; »Ö¸´ÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   95 000001CC         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   96 000001CC E59F0310        LDR              R0, =OSTCBHighRdy
   97 000001D0 E5900000        LDR              R0, [R0]
   98 000001D4 E59F130C        LDR              R1, =OSTCBCur
   99 000001D8 E5911000        LDR              R1, [R1]
  100 000001DC E1500001        CMP              R0, R1
  101 000001E0         
  102 000001E0 E28DD00C        ADD              SP, SP, #4*3 ; 
  103 000001E4 E16FF003        MSR              SPSR_cxsf, R3
  104 000001E8 08FD900F        LDMEQFD          SP!, {R0-R3, R12, PC}^ 
                                                            ; ²»½øÐÐÈÎÎñÇÐ»»
  105 000001EC E59FF2F8        LDR              PC, =OSIntCtxSw ; ½øÐÐÈÎÎñÇÐ»»
  118 000001F0         Uart2_Handler
                               HANDLER          UART2_Exception
   59 000001F0         



ARM Macro Assembler    Page 8 


   60 000001F0                 EXPORT           Uart2_Handler ; Êä³öµÄ±êºÅ
   61 000001F0                 IMPORT           UART2_Exception 
                                                            ; ÒýÓÃµÄÍâ²¿±êºÅ
   62 000001F0         
   63 000001F0         Uart2_Handler
   64 000001F0 E24EE004        SUB              LR, LR, #4  ; ¼ÆËã·µ»ØµØÖ·
   65 000001F4 E92D500F        STMFD            SP!, {R0-R3, R12, LR} 
                                                            ; ±£´æÈÎÎñ»·¾³
   66 000001F8 E14F3000        MRS              R3, SPSR    ; ±£´æ×´Ì¬
   67 000001FC E94D6008        STMFD            SP, {R3, SP, LR}^ ; ±£´æÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   68 00000200         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   69 00000200 E59F22D0        LDR              R2,  =OSIntNesting 
                                                            ; OSIntNesting++
   70 00000204 E5D21000        LDRB             R1, [R2]
   71 00000208 E2811001        ADD              R1, R1, #1
   72 0000020C E5C21000        STRB             R1, [R2]
   73 00000210         
   74 00000210 E24DD00C        SUB              SP, SP, #4*3
   75 00000214         
   76 00000214 E321F09F        MSR              CPSR_c, #(NoInt | SYS32Mode) 
                                                            ; ÇÐ»»µ½ÏµÍ³Ä£Ê½
   77 00000218 E3510001        CMP              R1, #1
   78 0000021C 059FD2B8        LDREQ            SP, =StackUsr
   79 00000220         
   80 00000220 EBFFFFFE        BL               UART2_Exception ; µ÷ÓÃcÓïÑÔµÄÖÐ
                                                            ¶Ï´¦Àí³ÌÐò
   81 00000224         
   82 00000224         ;       MSR     CPSR_c, #(NoInt | SYS32Mode)    ; ÇÐ»»µ½
                       ÏµÍ³Ä£Ê½
   83 00000224 E59F22B4        LDR              R2, =OsEnterSum ; OsEnterSum,Ê¹
                                                            OSIntExitÍË³öÊ±ÖÐ¶Ï
                                                            ¹Ø±Õ
   84 00000228 E3A01001        MOV              R1, #1
   85 0000022C E5821000        STR              R1, [R2]
   86 00000230         
   87 00000230 EBFFFFFE        BL               OSIntExit
   88 00000234         
   89 00000234 E59F22A4        LDR              R2, =OsEnterSum ; ÒòÎªÖÐ¶Ï·þÎñ³
                                                            ÌÐòÒªÍË³ö£¬ËùÒÔOsEn
                                                            terSum=0
   90 00000238 E3A01000        MOV              R1, #0
   91 0000023C E5821000        STR              R1, [R2]
   92 00000240         
   93 00000240 E321F092        MSR              CPSR_c, #(NoInt | IRQ32Mode) 
                                                            ; ÇÐ»»»ØirqÄ£Ê½
   94 00000244 E8DD6008        LDMFD            SP, {R3, SP, LR}^ ; »Ö¸´ÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   95 00000248         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   96 00000248 E59F0294        LDR              R0, =OSTCBHighRdy
   97 0000024C E5900000        LDR              R0, [R0]
   98 00000250 E59F1290        LDR              R1, =OSTCBCur
   99 00000254 E5911000        LDR              R1, [R1]
  100 00000258 E1500001        CMP              R0, R1
  101 0000025C         
  102 0000025C E28DD00C        ADD              SP, SP, #4*3 ; 
  103 00000260 E16FF003        MSR              SPSR_cxsf, R3



ARM Macro Assembler    Page 9 


  104 00000264 08FD900F        LDMEQFD          SP!, {R0-R3, R12, PC}^ 
                                                            ; ²»½øÐÐÈÎÎñÇÐ»»
  105 00000268 E59FF27C        LDR              PC, =OSIntCtxSw ; ½øÐÐÈÎÎñÇÐ»»
  119 0000026C         Uart3_Handler
                               HANDLER          UART3_Exception
   59 0000026C         
   60 0000026C                 EXPORT           Uart3_Handler ; Êä³öµÄ±êºÅ
   61 0000026C                 IMPORT           UART3_Exception 
                                                            ; ÒýÓÃµÄÍâ²¿±êºÅ
   62 0000026C         
   63 0000026C         Uart3_Handler
   64 0000026C E24EE004        SUB              LR, LR, #4  ; ¼ÆËã·µ»ØµØÖ·
   65 00000270 E92D500F        STMFD            SP!, {R0-R3, R12, LR} 
                                                            ; ±£´æÈÎÎñ»·¾³
   66 00000274 E14F3000        MRS              R3, SPSR    ; ±£´æ×´Ì¬
   67 00000278 E94D6008        STMFD            SP, {R3, SP, LR}^ ; ±£´æÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   68 0000027C         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   69 0000027C E59F2254        LDR              R2,  =OSIntNesting 
                                                            ; OSIntNesting++
   70 00000280 E5D21000        LDRB             R1, [R2]
   71 00000284 E2811001        ADD              R1, R1, #1
   72 00000288 E5C21000        STRB             R1, [R2]
   73 0000028C         
   74 0000028C E24DD00C        SUB              SP, SP, #4*3
   75 00000290         
   76 00000290 E321F09F        MSR              CPSR_c, #(NoInt | SYS32Mode) 
                                                            ; ÇÐ»»µ½ÏµÍ³Ä£Ê½
   77 00000294 E3510001        CMP              R1, #1
   78 00000298 059FD23C        LDREQ            SP, =StackUsr
   79 0000029C         
   80 0000029C EBFFFFFE        BL               UART3_Exception ; µ÷ÓÃcÓïÑÔµÄÖÐ
                                                            ¶Ï´¦Àí³ÌÐò
   81 000002A0         
   82 000002A0         ;       MSR     CPSR_c, #(NoInt | SYS32Mode)    ; ÇÐ»»µ½
                       ÏµÍ³Ä£Ê½
   83 000002A0 E59F2238        LDR              R2, =OsEnterSum ; OsEnterSum,Ê¹
                                                            OSIntExitÍË³öÊ±ÖÐ¶Ï
                                                            ¹Ø±Õ
   84 000002A4 E3A01001        MOV              R1, #1
   85 000002A8 E5821000        STR              R1, [R2]
   86 000002AC         
   87 000002AC EBFFFFFE        BL               OSIntExit
   88 000002B0         
   89 000002B0 E59F2228        LDR              R2, =OsEnterSum ; ÒòÎªÖÐ¶Ï·þÎñ³
                                                            ÌÐòÒªÍË³ö£¬ËùÒÔOsEn
                                                            terSum=0
   90 000002B4 E3A01000        MOV              R1, #0
   91 000002B8 E5821000        STR              R1, [R2]
   92 000002BC         
   93 000002BC E321F092        MSR              CPSR_c, #(NoInt | IRQ32Mode) 
                                                            ; ÇÐ»»»ØirqÄ£Ê½
   94 000002C0 E8DD6008        LDMFD            SP, {R3, SP, LR}^ ; »Ö¸´ÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   95 000002C4         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   96 000002C4 E59F0218        LDR              R0, =OSTCBHighRdy
   97 000002C8 E5900000        LDR              R0, [R0]



ARM Macro Assembler    Page 10 


   98 000002CC E59F1214        LDR              R1, =OSTCBCur
   99 000002D0 E5911000        LDR              R1, [R1]
  100 000002D4 E1500001        CMP              R0, R1
  101 000002D8         
  102 000002D8 E28DD00C        ADD              SP, SP, #4*3 ; 
  103 000002DC E16FF003        MSR              SPSR_cxsf, R3
  104 000002E0 08FD900F        LDMEQFD          SP!, {R0-R3, R12, PC}^ 
                                                            ; ²»½øÐÐÈÎÎñÇÐ»»
  105 000002E4 E59FF200        LDR              PC, =OSIntCtxSw ; ½øÐÐÈÎÎñÇÐ»»
  120 000002E8         CAN_Handler
                               HANDLER          CAN_Exception
   59 000002E8         
   60 000002E8                 EXPORT           CAN_Handler ; Êä³öµÄ±êºÅ
   61 000002E8                 IMPORT           CAN_Exception ; ÒýÓÃµÄÍâ²¿±êºÅ
   62 000002E8         
   63 000002E8         CAN_Handler
   64 000002E8 E24EE004        SUB              LR, LR, #4  ; ¼ÆËã·µ»ØµØÖ·
   65 000002EC E92D500F        STMFD            SP!, {R0-R3, R12, LR} 
                                                            ; ±£´æÈÎÎñ»·¾³
   66 000002F0 E14F3000        MRS              R3, SPSR    ; ±£´æ×´Ì¬
   67 000002F4 E94D6008        STMFD            SP, {R3, SP, LR}^ ; ±£´æÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   68 000002F8         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   69 000002F8 E59F21D8        LDR              R2,  =OSIntNesting 
                                                            ; OSIntNesting++
   70 000002FC E5D21000        LDRB             R1, [R2]
   71 00000300 E2811001        ADD              R1, R1, #1
   72 00000304 E5C21000        STRB             R1, [R2]
   73 00000308         
   74 00000308 E24DD00C        SUB              SP, SP, #4*3
   75 0000030C         
   76 0000030C E321F09F        MSR              CPSR_c, #(NoInt | SYS32Mode) 
                                                            ; ÇÐ»»µ½ÏµÍ³Ä£Ê½
   77 00000310 E3510001        CMP              R1, #1
   78 00000314 059FD1C0        LDREQ            SP, =StackUsr
   79 00000318         
   80 00000318 EBFFFFFE        BL               CAN_Exception ; µ÷ÓÃcÓïÑÔµÄÖÐ¶Ï
                                                            ´¦Àí³ÌÐò
   81 0000031C         
   82 0000031C         ;       MSR     CPSR_c, #(NoInt | SYS32Mode)    ; ÇÐ»»µ½
                       ÏµÍ³Ä£Ê½
   83 0000031C E59F21BC        LDR              R2, =OsEnterSum ; OsEnterSum,Ê¹
                                                            OSIntExitÍË³öÊ±ÖÐ¶Ï
                                                            ¹Ø±Õ
   84 00000320 E3A01001        MOV              R1, #1
   85 00000324 E5821000        STR              R1, [R2]
   86 00000328         
   87 00000328 EBFFFFFE        BL               OSIntExit
   88 0000032C         
   89 0000032C E59F21AC        LDR              R2, =OsEnterSum ; ÒòÎªÖÐ¶Ï·þÎñ³
                                                            ÌÐòÒªÍË³ö£¬ËùÒÔOsEn
                                                            terSum=0
   90 00000330 E3A01000        MOV              R1, #0
   91 00000334 E5821000        STR              R1, [R2]
   92 00000338         
   93 00000338 E321F092        MSR              CPSR_c, #(NoInt | IRQ32Mode) 
                                                            ; ÇÐ»»»ØirqÄ£Ê½
   94 0000033C E8DD6008        LDMFD            SP, {R3, SP, LR}^ ; »Ö¸´ÓÃ»§×´Ì



ARM Macro Assembler    Page 11 


                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   95 00000340         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   96 00000340 E59F019C        LDR              R0, =OSTCBHighRdy
   97 00000344 E5900000        LDR              R0, [R0]
   98 00000348 E59F1198        LDR              R1, =OSTCBCur
   99 0000034C E5911000        LDR              R1, [R1]
  100 00000350 E1500001        CMP              R0, R1
  101 00000354         
  102 00000354 E28DD00C        ADD              SP, SP, #4*3 ; 
  103 00000358 E16FF003        MSR              SPSR_cxsf, R3
  104 0000035C 08FD900F        LDMEQFD          SP!, {R0-R3, R12, PC}^ 
                                                            ; ²»½øÐÐÈÎÎñÇÐ»»
  105 00000360 E59FF184        LDR              PC, =OSIntCtxSw ; ½øÐÐÈÎÎñÇÐ»»
  121 00000364         Timer1_Handler
                               HANDLER          Timer1_Exception
   59 00000364         
   60 00000364                 EXPORT           Timer1_Handler ; Êä³öµÄ±êºÅ
   61 00000364                 IMPORT           Timer1_Exception 
                                                            ; ÒýÓÃµÄÍâ²¿±êºÅ
   62 00000364         
   63 00000364         Timer1_Handler
   64 00000364 E24EE004        SUB              LR, LR, #4  ; ¼ÆËã·µ»ØµØÖ·
   65 00000368 E92D500F        STMFD            SP!, {R0-R3, R12, LR} 
                                                            ; ±£´æÈÎÎñ»·¾³
   66 0000036C E14F3000        MRS              R3, SPSR    ; ±£´æ×´Ì¬
   67 00000370 E94D6008        STMFD            SP, {R3, SP, LR}^ ; ±£´æÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   68 00000374         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   69 00000374 E59F215C        LDR              R2,  =OSIntNesting 
                                                            ; OSIntNesting++
   70 00000378 E5D21000        LDRB             R1, [R2]
   71 0000037C E2811001        ADD              R1, R1, #1
   72 00000380 E5C21000        STRB             R1, [R2]
   73 00000384         
   74 00000384 E24DD00C        SUB              SP, SP, #4*3
   75 00000388         
   76 00000388 E321F09F        MSR              CPSR_c, #(NoInt | SYS32Mode) 
                                                            ; ÇÐ»»µ½ÏµÍ³Ä£Ê½
   77 0000038C E3510001        CMP              R1, #1
   78 00000390 059FD144        LDREQ            SP, =StackUsr
   79 00000394         
   80 00000394 EBFFFFFE        BL               Timer1_Exception ; µ÷ÓÃcÓïÑÔµÄÖ
                                                            Ð¶Ï´¦Àí³ÌÐò
   81 00000398         
   82 00000398         ;       MSR     CPSR_c, #(NoInt | SYS32Mode)    ; ÇÐ»»µ½
                       ÏµÍ³Ä£Ê½
   83 00000398 E59F2140        LDR              R2, =OsEnterSum ; OsEnterSum,Ê¹
                                                            OSIntExitÍË³öÊ±ÖÐ¶Ï
                                                            ¹Ø±Õ
   84 0000039C E3A01001        MOV              R1, #1
   85 000003A0 E5821000        STR              R1, [R2]
   86 000003A4         
   87 000003A4 EBFFFFFE        BL               OSIntExit
   88 000003A8         
   89 000003A8 E59F2130        LDR              R2, =OsEnterSum ; ÒòÎªÖÐ¶Ï·þÎñ³
                                                            ÌÐòÒªÍË³ö£¬ËùÒÔOsEn
                                                            terSum=0



ARM Macro Assembler    Page 12 


   90 000003AC E3A01000        MOV              R1, #0
   91 000003B0 E5821000        STR              R1, [R2]
   92 000003B4         
   93 000003B4 E321F092        MSR              CPSR_c, #(NoInt | IRQ32Mode) 
                                                            ; ÇÐ»»»ØirqÄ£Ê½
   94 000003B8 E8DD6008        LDMFD            SP, {R3, SP, LR}^ ; »Ö¸´ÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   95 000003BC         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   96 000003BC E59F0120        LDR              R0, =OSTCBHighRdy
   97 000003C0 E5900000        LDR              R0, [R0]
   98 000003C4 E59F111C        LDR              R1, =OSTCBCur
   99 000003C8 E5911000        LDR              R1, [R1]
  100 000003CC E1500001        CMP              R0, R1
  101 000003D0         
  102 000003D0 E28DD00C        ADD              SP, SP, #4*3 ; 
  103 000003D4 E16FF003        MSR              SPSR_cxsf, R3
  104 000003D8 08FD900F        LDMEQFD          SP!, {R0-R3, R12, PC}^ 
                                                            ; ²»½øÐÐÈÎÎñÇÐ»»
  105 000003DC E59FF108        LDR              PC, =OSIntCtxSw ; ½øÐÐÈÎÎñÇÐ»»
  122 000003E0         Timer2_Handler
                               HANDLER          Timer2_Exception
   59 000003E0         
   60 000003E0                 EXPORT           Timer2_Handler ; Êä³öµÄ±êºÅ
   61 000003E0                 IMPORT           Timer2_Exception 
                                                            ; ÒýÓÃµÄÍâ²¿±êºÅ
   62 000003E0         
   63 000003E0         Timer2_Handler
   64 000003E0 E24EE004        SUB              LR, LR, #4  ; ¼ÆËã·µ»ØµØÖ·
   65 000003E4 E92D500F        STMFD            SP!, {R0-R3, R12, LR} 
                                                            ; ±£´æÈÎÎñ»·¾³
   66 000003E8 E14F3000        MRS              R3, SPSR    ; ±£´æ×´Ì¬
   67 000003EC E94D6008        STMFD            SP, {R3, SP, LR}^ ; ±£´æÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   68 000003F0         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   69 000003F0 E59F20E0        LDR              R2,  =OSIntNesting 
                                                            ; OSIntNesting++
   70 000003F4 E5D21000        LDRB             R1, [R2]
   71 000003F8 E2811001        ADD              R1, R1, #1
   72 000003FC E5C21000        STRB             R1, [R2]
   73 00000400         
   74 00000400 E24DD00C        SUB              SP, SP, #4*3
   75 00000404         
   76 00000404 E321F09F        MSR              CPSR_c, #(NoInt | SYS32Mode) 
                                                            ; ÇÐ»»µ½ÏµÍ³Ä£Ê½
   77 00000408 E3510001        CMP              R1, #1
   78 0000040C 059FD0C8        LDREQ            SP, =StackUsr
   79 00000410         
   80 00000410 EBFFFFFE        BL               Timer2_Exception ; µ÷ÓÃcÓïÑÔµÄÖ
                                                            Ð¶Ï´¦Àí³ÌÐò
   81 00000414         
   82 00000414         ;       MSR     CPSR_c, #(NoInt | SYS32Mode)    ; ÇÐ»»µ½
                       ÏµÍ³Ä£Ê½
   83 00000414 E59F20C4        LDR              R2, =OsEnterSum ; OsEnterSum,Ê¹
                                                            OSIntExitÍË³öÊ±ÖÐ¶Ï
                                                            ¹Ø±Õ
   84 00000418 E3A01001        MOV              R1, #1
   85 0000041C E5821000        STR              R1, [R2]



ARM Macro Assembler    Page 13 


   86 00000420         
   87 00000420 EBFFFFFE        BL               OSIntExit
   88 00000424         
   89 00000424 E59F20B4        LDR              R2, =OsEnterSum ; ÒòÎªÖÐ¶Ï·þÎñ³
                                                            ÌÐòÒªÍË³ö£¬ËùÒÔOsEn
                                                            terSum=0
   90 00000428 E3A01000        MOV              R1, #0
   91 0000042C E5821000        STR              R1, [R2]
   92 00000430         
   93 00000430 E321F092        MSR              CPSR_c, #(NoInt | IRQ32Mode) 
                                                            ; ÇÐ»»»ØirqÄ£Ê½
   94 00000434 E8DD6008        LDMFD            SP, {R3, SP, LR}^ ; »Ö¸´ÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   95 00000438         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   96 00000438 E59F00A4        LDR              R0, =OSTCBHighRdy
   97 0000043C E5900000        LDR              R0, [R0]
   98 00000440 E59F10A0        LDR              R1, =OSTCBCur
   99 00000444 E5911000        LDR              R1, [R1]
  100 00000448 E1500001        CMP              R0, R1
  101 0000044C         
  102 0000044C E28DD00C        ADD              SP, SP, #4*3 ; 
  103 00000450 E16FF003        MSR              SPSR_cxsf, R3
  104 00000454 08FD900F        LDMEQFD          SP!, {R0-R3, R12, PC}^ 
                                                            ; ²»½øÐÐÈÎÎñÇÐ»»
  105 00000458 E59FF08C        LDR              PC, =OSIntCtxSw ; ½øÐÐÈÎÎñÇÐ»»
  123 0000045C         EINT2_Handler
                               HANDLER          Eint_Exception
   59 0000045C         
   60 0000045C                 EXPORT           EINT2_Handler ; Êä³öµÄ±êºÅ
   61 0000045C                 IMPORT           Eint_Exception ; ÒýÓÃµÄÍâ²¿±êºÅ
                                                            
   62 0000045C         
   63 0000045C         EINT2_Handler
   64 0000045C E24EE004        SUB              LR, LR, #4  ; ¼ÆËã·µ»ØµØÖ·
   65 00000460 E92D500F        STMFD            SP!, {R0-R3, R12, LR} 
                                                            ; ±£´æÈÎÎñ»·¾³
   66 00000464 E14F3000        MRS              R3, SPSR    ; ±£´æ×´Ì¬
   67 00000468 E94D6008        STMFD            SP, {R3, SP, LR}^ ; ±£´æÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   68 0000046C         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   69 0000046C E59F2064        LDR              R2,  =OSIntNesting 
                                                            ; OSIntNesting++
   70 00000470 E5D21000        LDRB             R1, [R2]
   71 00000474 E2811001        ADD              R1, R1, #1
   72 00000478 E5C21000        STRB             R1, [R2]
   73 0000047C         
   74 0000047C E24DD00C        SUB              SP, SP, #4*3
   75 00000480         
   76 00000480 E321F09F        MSR              CPSR_c, #(NoInt | SYS32Mode) 
                                                            ; ÇÐ»»µ½ÏµÍ³Ä£Ê½
   77 00000484 E3510001        CMP              R1, #1
   78 00000488 059FD04C        LDREQ            SP, =StackUsr
   79 0000048C         
   80 0000048C EBFFFFFE        BL               Eint_Exception ; µ÷ÓÃcÓïÑÔµÄÖÐ¶
                                                            Ï´¦Àí³ÌÐò
   81 00000490         
   82 00000490         ;       MSR     CPSR_c, #(NoInt | SYS32Mode)    ; ÇÐ»»µ½



ARM Macro Assembler    Page 14 


                       ÏµÍ³Ä£Ê½
   83 00000490 E59F2048        LDR              R2, =OsEnterSum ; OsEnterSum,Ê¹
                                                            OSIntExitÍË³öÊ±ÖÐ¶Ï
                                                            ¹Ø±Õ
   84 00000494 E3A01001        MOV              R1, #1
   85 00000498 E5821000        STR              R1, [R2]
   86 0000049C         
   87 0000049C EBFFFFFE        BL               OSIntExit
   88 000004A0         
   89 000004A0 E59F2038        LDR              R2, =OsEnterSum ; ÒòÎªÖÐ¶Ï·þÎñ³
                                                            ÌÐòÒªÍË³ö£¬ËùÒÔOsEn
                                                            terSum=0
   90 000004A4 E3A01000        MOV              R1, #0
   91 000004A8 E5821000        STR              R1, [R2]
   92 000004AC         
   93 000004AC E321F092        MSR              CPSR_c, #(NoInt | IRQ32Mode) 
                                                            ; ÇÐ»»»ØirqÄ£Ê½
   94 000004B0 E8DD6008        LDMFD            SP, {R3, SP, LR}^ ; »Ö¸´ÓÃ»§×´Ì
                                                            ¬µÄR3,SP,LR,×¢Òâ²»Ä
                                                            Ü»ØÐ´
   95 000004B4         ; Èç¹û»ØÐ´µÄÊÇÓÃ»§µÄSP£¬ËùÒÔºóÃæÒªµ÷ÕûSP
   96 000004B4 E59F0028        LDR              R0, =OSTCBHighRdy
   97 000004B8 E5900000        LDR              R0, [R0]
   98 000004BC E59F1024        LDR              R1, =OSTCBCur
   99 000004C0 E5911000        LDR              R1, [R1]
  100 000004C4 E1500001        CMP              R0, R1
  101 000004C8         
  102 000004C8 E28DD00C        ADD              SP, SP, #4*3 ; 
  103 000004CC E16FF003        MSR              SPSR_cxsf, R3
  104 000004D0 08FD900F        LDMEQFD          SP!, {R0-R3, R12, PC}^ 
                                                            ; ²»½øÐÐÈÎÎñÇÐ»»
  105 000004D4 E59FF010        LDR              PC, =OSIntCtxSw ; ½øÐÐÈÎÎñÇÐ»»
  124 000004D8                 END
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
Command Line: --debug --no_warn --xref --device=DARMP --apcs=interwork -o.\obj\
IRQ.o -IC:\Keil\ARM\INC\Philips --list=.\lst\IRQ.lst app\IRQ.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

CAN_Handler 000002E8

Symbol: CAN_Handler
   Definitions
      At line 63 in macro XbÇlÇ
      at line 120 in file app\IRQ.s
   Uses
      At line 60 in macro XbÇlÇ
      at line 120 in file app\IRQ.s
Comment: CAN_Handler used once
EINT2_Handler 0000045C

Symbol: EINT2_Handler
   Definitions
      At line 63 in macro XbÇlÇ
      at line 123 in file app\IRQ.s
   Uses
      At line 60 in macro XbÇlÇ
      at line 123 in file app\IRQ.s
Comment: EINT2_Handler used once
IRQ 00000000

Symbol: IRQ
   Definitions
      At line 55 in file app\IRQ.s
   Uses
      None
Comment: IRQ unused
IRQ_Handler 00000000

Symbol: IRQ_Handler
   Definitions
      At line 63 in macro XbÇlÇ
      at line 111 in file app\IRQ.s
   Uses
      At line 60 in macro XbÇlÇ
      at line 111 in file app\IRQ.s
Comment: IRQ_Handler used once
Timer0_Handler 0000007C

Symbol: Timer0_Handler
   Definitions
      At line 63 in macro XbÇlÇ
      at line 115 in file app\IRQ.s
   Uses
      At line 60 in macro XbÇlÇ
      at line 115 in file app\IRQ.s
Comment: Timer0_Handler used once
Timer1_Handler 00000364

Symbol: Timer1_Handler
   Definitions
      At line 63 in macro XbÇlÇ
      at line 121 in file app\IRQ.s
   Uses
      At line 60 in macro XbÇlÇ
      at line 121 in file app\IRQ.s
Comment: Timer1_Handler used once
Timer2_Handler 000003E0



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols


Symbol: Timer2_Handler
   Definitions
      At line 63 in macro XbÇlÇ
      at line 122 in file app\IRQ.s
   Uses
      At line 60 in macro XbÇlÇ
      at line 122 in file app\IRQ.s
Comment: Timer2_Handler used once
Uart0_Handler 000000F8

Symbol: Uart0_Handler
   Definitions
      At line 63 in macro XbÇlÇ
      at line 116 in file app\IRQ.s
   Uses
      At line 60 in macro XbÇlÇ
      at line 116 in file app\IRQ.s
Comment: Uart0_Handler used once
Uart1_Handler 00000174

Symbol: Uart1_Handler
   Definitions
      At line 63 in macro XbÇlÇ
      at line 117 in file app\IRQ.s
   Uses
      At line 60 in macro XbÇlÇ
      at line 117 in file app\IRQ.s
Comment: Uart1_Handler used once
Uart2_Handler 000001F0

Symbol: Uart2_Handler
   Definitions
      At line 63 in macro XbÇlÇ
      at line 118 in file app\IRQ.s
   Uses
      At line 60 in macro XbÇlÇ
      at line 118 in file app\IRQ.s
Comment: Uart2_Handler used once
Uart3_Handler 0000026C

Symbol: Uart3_Handler
   Definitions
      At line 63 in macro XbÇlÇ
      at line 119 in file app\IRQ.s
   Uses
      At line 60 in macro XbÇlÇ
      at line 119 in file app\IRQ.s
Comment: Uart3_Handler used once
11 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.debug_info$$$IRQ 00000000

Symbol: .debug_info$$$IRQ
   Definitions
      None
   Uses
      None
Warning: .debug_info$$$IRQ undefinedComment: .debug_info$$$IRQ unused
1 symbol



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.debug_line$$$IRQ 00000000

Symbol: .debug_line$$$IRQ
   Definitions
      None
   Uses
      None
Warning: .debug_line$$$IRQ undefinedComment: .debug_line$$$IRQ unused
1 symbol



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.debug_abbrev 00000000

Symbol: .debug_abbrev
   Definitions
      None
   Uses
      None
Warning: .debug_abbrev undefinedComment: .debug_abbrev unused
__ARM_asm.debug_abbrev 00000000

Symbol: __ARM_asm.debug_abbrev
   Definitions
      None
   Uses
      None
Warning: __ARM_asm.debug_abbrev undefinedComment: __ARM_asm.debug_abbrev unused
2 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

FIQ32Mode 00000011

Symbol: FIQ32Mode
   Definitions
      At line 40 in file app\IRQ.s
   Uses
      None
Comment: FIQ32Mode unused
IRQ32Mode 00000012

Symbol: IRQ32Mode
   Definitions
      At line 39 in file app\IRQ.s
   Uses
      At line 93 in macro  ÇXÇ
      at line 111 in file app\IRQ.s
Comment: IRQ32Mode used once
NoInt 00000080

Symbol: NoInt
   Definitions
      At line 34 in file app\IRQ.s
   Uses
      At line 76 in macro  ÇXÇ
      at line 111 in file app\IRQ.s
      At line 93 in macro  ÇXÇ
      at line 111 in file app\IRQ.s

SVC32Mode 00000013

Symbol: SVC32Mode
   Definitions
      At line 37 in file app\IRQ.s
   Uses
      None
Comment: SVC32Mode unused
SYS32Mode 0000001F

Symbol: SYS32Mode
   Definitions
      At line 38 in file app\IRQ.s
   Uses
      At line 76 in macro  ÇXÇ
      at line 111 in file app\IRQ.s
Comment: SYS32Mode used once
USR32Mode 00000010

Symbol: USR32Mode
   Definitions
      At line 36 in file app\IRQ.s
   Uses
      None
Comment: USR32Mode unused
6 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

CAN_Exception 00000000

Symbol: CAN_Exception
   Definitions
      At line 61 in macro ðmÇÀ}Ç
      at line 120 in file app\IRQ.s
   Uses
      At line 80 in macro ðmÇÀ}Ç
      at line 120 in file app\IRQ.s
Comment: CAN_Exception used once
Eint_Exception 00000000

Symbol: Eint_Exception
   Definitions
      At line 61 in macro ðmÇÀ}Ç
      at line 123 in file app\IRQ.s
   Uses
      At line 80 in macro ðmÇÀ}Ç
      at line 123 in file app\IRQ.s
Comment: Eint_Exception used once
IRQ_Exception 00000000

Symbol: IRQ_Exception
   Definitions
      At line 61 in macro ðmÇÀ}Ç
      at line 111 in file app\IRQ.s
   Uses
      At line 80 in macro ðmÇÀ}Ç
      at line 111 in file app\IRQ.s
Comment: IRQ_Exception used once
OSIntCtxSw 00000000

Symbol: OSIntCtxSw
   Definitions
      At line 44 in file app\IRQ.s
   Uses
      At line 105 in macro ðmÇÀ}Ç
      at line 111 in file app\IRQ.s
Comment: OSIntCtxSw used once
OSIntExit 00000000

Symbol: OSIntExit
   Definitions
      At line 45 in file app\IRQ.s
   Uses
      At line 87 in macro ðmÇÀ}Ç
      at line 111 in file app\IRQ.s
Comment: OSIntExit used once
OSIntNesting 00000000

Symbol: OSIntNesting
   Definitions
      At line 48 in file app\IRQ.s
   Uses
      At line 69 in macro ðmÇÀ}Ç
      at line 111 in file app\IRQ.s
Comment: OSIntNesting used once
OSTCBCur 00000000




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
External symbols

Symbol: OSTCBCur
   Definitions
      At line 46 in file app\IRQ.s
   Uses
      At line 98 in macro ðmÇÀ}Ç
      at line 111 in file app\IRQ.s
Comment: OSTCBCur used once
OSTCBHighRdy 00000000

Symbol: OSTCBHighRdy
   Definitions
      At line 47 in file app\IRQ.s
   Uses
      At line 96 in macro ðmÇÀ}Ç
      at line 111 in file app\IRQ.s
Comment: OSTCBHighRdy used once
OsEnterSum 00000000

Symbol: OsEnterSum
   Definitions
      At line 50 in file app\IRQ.s
   Uses
      At line 83 in macro ðmÇÀ}Ç
      at line 111 in file app\IRQ.s
      At line 89 in macro ðmÇÀ}Ç
      at line 111 in file app\IRQ.s

StackUsr 00000000

Symbol: StackUsr
   Definitions
      At line 49 in file app\IRQ.s
   Uses
      At line 78 in macro ðmÇÀ}Ç
      at line 111 in file app\IRQ.s
Comment: StackUsr used once
Timer0_Exception 00000000

Symbol: Timer0_Exception
   Definitions
      At line 61 in macro ðmÇÀ}Ç
      at line 115 in file app\IRQ.s
   Uses
      At line 80 in macro ðmÇÀ}Ç
      at line 115 in file app\IRQ.s
Comment: Timer0_Exception used once
Timer1_Exception 00000000

Symbol: Timer1_Exception
   Definitions
      At line 61 in macro ðmÇÀ}Ç
      at line 121 in file app\IRQ.s
   Uses
      At line 80 in macro ðmÇÀ}Ç
      at line 121 in file app\IRQ.s
Comment: Timer1_Exception used once
Timer2_Exception 00000000

Symbol: Timer2_Exception



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
External symbols

   Definitions
      At line 61 in macro ðmÇÀ}Ç
      at line 122 in file app\IRQ.s
   Uses
      At line 80 in macro ðmÇÀ}Ç
      at line 122 in file app\IRQ.s
Comment: Timer2_Exception used once
UART0_Exception 00000000

Symbol: UART0_Exception
   Definitions
      At line 61 in macro ðmÇÀ}Ç
      at line 116 in file app\IRQ.s
   Uses
      At line 80 in macro ðmÇÀ}Ç
      at line 116 in file app\IRQ.s
Comment: UART0_Exception used once
UART1_Exception 00000000

Symbol: UART1_Exception
   Definitions
      At line 61 in macro ðmÇÀ}Ç
      at line 117 in file app\IRQ.s
   Uses
      At line 80 in macro ðmÇÀ}Ç
      at line 117 in file app\IRQ.s
Comment: UART1_Exception used once
UART2_Exception 00000000

Symbol: UART2_Exception
   Definitions
      At line 61 in macro ðmÇÀ}Ç
      at line 118 in file app\IRQ.s
   Uses
      At line 80 in macro ðmÇÀ}Ç
      at line 118 in file app\IRQ.s
Comment: UART2_Exception used once
UART3_Exception 00000000

Symbol: UART3_Exception
   Definitions
      At line 61 in macro ðmÇÀ}Ç
      at line 119 in file app\IRQ.s
   Uses
      At line 80 in macro ðmÇÀ}Ç
      at line 119 in file app\IRQ.s
Comment: UART3_Exception used once
17 symbols
359 symbols in table
